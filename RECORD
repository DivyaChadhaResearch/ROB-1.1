#include <Servo.h>

#define BUTTON_PIN 2    // Push button connected to pin 2
#define MAX_STEPS 10    // How many positions you want to record

Servo servos[6];        // 6 DOF robot arm
int servoPins[6] = {3, 5, 6, 9, 10, 11}; // PWM pins for servos

int recordedAngles[MAX_STEPS][6]; // Store servo positions
int stepCount = 0;
bool recording = true;  // First press = record, Second press = playback

void setup() {
  pinMode(BUTTON_PIN, INPUT_PULLUP); // Button with pull-up
  for (int i = 0; i < 6; i++) {
    servos[i].attach(servoPins[i]);
    servos[i].write(90); // Start at center position
  }
}

void loop() {
  if (digitalRead(BUTTON_PIN) == LOW) { // Button pressed
    delay(300); // Debounce

    if (recording && stepCount < MAX_STEPS) {
      // Record current servo positions
      for (int i = 0; i < 6; i++) {
        recordedAngles[stepCount][i] = servos[i].read();
      }
      stepCount++;
    } 
    else {
      // Playback recorded motions
      for (int s = 0; s < stepCount; s++) {
        for (int i = 0; i < 6; i++) {
          servos[i].write(recordedAngles[s][i]);
        }
        delay(1000); // wait before next step
      }
    }

    recording = !recording; // Toggle record/playback
  }
}

